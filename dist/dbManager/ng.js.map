{"version":3,"sources":["../../dbManager/ng.js"],"names":["app","angular","module","run","$rootScope","$state","$on","event","console","log","moment","locale","config","$stateProvider","$urlRouterProvider","otherwise","state","templateUrl","controller","$scope","$http","$location","CRUD","crud","getTableQuan","then","data","commQuan","logout","method","url","headers","res","go","logged","$","children","on","e","stopPropagation","$clicked","not","slideUp","slideToggle","getArtList","getCommentersList","actID","get","homeComm","commArr","params","act","value","squash","artId","$stateParams","action","applyArt","art","artTitle","editedArt","title","artReporter","reporterName","newArticleHTML","article","description","artDesc","getArtById","toastr","validateInput","submitNewArticle","valid","query","serialize","summerHTML","summernote","frontImg","tagSelect","imageName","name","tags","artFileName","frontImgName","id","tagSet","Set","removeTag","val","delete","displayTags","Array","from","placeHolder","tabsize","height","onImageUpload","files","editor","$editable","FormData","append","ajax","dataType","cache","contentType","processData","type","success","result","pageNum","editFImg","saveImage","$event","alert","target","file","newFront","fullEdit","obj","getCateIdLists","selectedArts","quickArtSearch","quickResults","tab","addToList","item","category","map","Map","set","sendSelectedCates","cate","idsInOrder","sortable","oldArr","newArr","x","size","oldItem","push","titlesCategories","setTimeout","elList","el","disableSelection","deleteCateArt","cateID","page","goSearch","getCommAndApply","getReporterList","loaded","pagination","totalLen","rangeUpdate","repId","req","getTagsList","filter","date","fromNow","format","status"],"mappings":"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","file":"ng.js","sourcesContent":["let app = angular.module('admin', [\"ui.router\", \"ng-file-model\"]).run(($rootScope, $state) => {\r\n\t/*$http({\r\n\t\t\tmethod: 'POST',\r\n\t\t\turl: 'tpl/login/checkLogin.php',\r\n\t\t\theaders:{\r\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t\t}\r\n\t}).then(function (res) {\r\n\t\t\tconsole.log(res);\r\n\t\t\tif(res.data == '1'){\r\n\t\t\t\t\tconsole.log('yes');\r\n\t\t\t\t\t//$state.go('CMS.home', {});\r\n\t\t\t\t\t$rootScope.logged = true;\r\n\t\t\t}else {\r\n\t\t\t\t\tconsole.log('not logged');\r\n\t\t\t}\r\n\t});*/\r\n\t$rootScope.$on('$stateChangeStart', (event) => {\r\n\t\tconsole.log(event);\r\n\t});\r\n\tmoment.locale('he');\r\n});\r\napp.config(($stateProvider, $urlRouterProvider) => {\r\n\t$urlRouterProvider.otherwise(\"/\");\r\n\t$stateProvider\r\n\t\t.state('CMS', {\r\n\t\t\ttemplateUrl: \"tpl/cms/cms.php\",\r\n\t\t\tcontroller: function ($scope, $http, $state, $location, $rootScope, CRUD) {\r\n\t\t\t\tconsole.log('fuck');\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.getTableQuan().then(function (data) {\r\n\t\t\t\t\t$scope.crud.commQuan = data;\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log($scope.crud.commQuan);\r\n\t\t\t\t$scope.logout = function () {\r\n\t\t\t\t\t$http({\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\turl: 'tpl/login/logout.php',\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(function (res) {\r\n\t\t\t\t\t\t$state.go('start.login', {});\r\n\t\t\t\t\t\t$rootScope.logged = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log('CMS');\r\n\t\t\t\t$('.collpseableSide').children().on('click', function (e) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t});\r\n\t\t\t\t$('.link').on('click', function () {\r\n\t\t\t\t\tvar $clicked = $(this).children('.collpseableSide');\r\n\t\t\t\t\t$('.collpseableSide').not($clicked).slideUp(500);\r\n\t\t\t\t\t$clicked.slideToggle(500);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t\t.state('CMS.home', {\r\n\t\t\turl: '/',\r\n\t\t\ttemplateUrl: 'tpl/cms/home.html',\r\n\t\t\tcontroller: function ($scope, CRUD, $http) {\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.getArtList(0);\r\n\t\t\t\t$scope.crud.getCommentersList();\r\n\t\t\t\t$scope.actID = null;\r\n\t\t\t\t$http.get('../class/DB.php?list=comments&page=1').then(function (res) {\r\n\t\t\t\t\t$scope.homeComm = res.data.commArr;\r\n\t\t\t\t\tconsole.log(res.data.commArr);\r\n\t\t\t\t});\r\n\t\t\t\t//console.log($scope.crud);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.state('CMS.new-article', {\r\n\t\t\turl: '/article/{artId:int}/{act:string}',\r\n\t\t\tparams: {\r\n\t\t\t\tact: {value: 'new', squash: true},\r\n\t\t\t\tartId: {value: null, squash: true}\r\n\t\t\t},\r\n\t\t\tcontroller: function ($scope, $http, $stateParams) {\r\n\t\t\t\t$scope.action = $stateParams['act'];\r\n\t\t\t\t$scope.artId = $stateParams['artId'];\r\n\t\t\t\t$scope.applyArt = function () {\r\n\t\t\t\t\t$scope.art = {};\r\n\t\t\t\t\t$scope.art.artTitle = $scope.crud.editedArt.title;\r\n\t\t\t\t\t$scope.art.artReporter = $scope.crud.editedArt.reporterName;\r\n\t\t\t\t\t$scope.art.newArticleHTML = $scope.crud.editedArt.article;\r\n\t\t\t\t\tconsole.log($scope.art.description);\r\n\t\t\t\t\tconsole.log($scope.crud.editedArt.description);\r\n\t\t\t\t\t$scope.art.artDesc = $scope.crud.editedArt.description;\r\n\t\t\t\t};\r\n\t\t\t\tif ($scope.action === 'all-to-edit') {\r\n\t\t\t\t\t$scope.applyArt();\r\n\t\t\t\t}\r\n\t\t\t\telse if ($scope.action === 'edit') {\r\n\t\t\t\t\tif ($scope.artId) {\r\n\t\t\t\t\t\t$scope.crud.getArtById($scope, $scope.artId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttoastr[\"error\"]('no articles ID');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$scope.validateInput = function () {\r\n\t\t\t\t\t//if(!$scope.frontImg)\r\n\t\t\t\t};\r\n\t\t\t\t$scope.submitNewArticle = function (valid) {\r\n\t\t\t\t\t//if(!valid) return;\r\n\t\t\t\t\tvar query = $('#formTitles').serialize();\r\n\t\t\t\t\tvar summerHTML = $('#summerNote').summernote('code');\r\n\t\t\t\t\tconsole.log(query);\r\n\t\t\t\t\t//console.log(summerHTML);\r\n\t\t\t\t\tconsole.log($scope.frontImg);\r\n\t\t\t\t\tconsole.log($scope.art.tagSelect);\r\n\t\t\t\t\tconsole.log($scope.crud.editedArt.frontImg);\r\n\t\t\t\t\tvar imageName = $scope.frontImg ? $scope.frontImg.name : $scope.crud.editedArt.frontImg;\r\n\t\t\t\t\t//if(!$scope.validateInput()) return;\r\n\t\t\t\t\tif ($scope.action == 'edit') {\r\n\t\t\t\t\t\tconsole.log($scope.crud.editedArt.article);\r\n\t\t\t\t\t\t$http({\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\turl: '../class/DB.php?act=edit-art&' + query,\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tarticle: summerHTML,\r\n\t\t\t\t\t\t\t\tfrontImg: $scope.frontImg,\r\n\t\t\t\t\t\t\t\ttags: $scope.art.tagSelect,\r\n\t\t\t\t\t\t\t\tartFileName: $scope.crud.editedArt.article,\r\n\t\t\t\t\t\t\t\tfrontImgName: imageName,\r\n\t\t\t\t\t\t\t\tartId: $scope.crud.editedArt.id\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}).then(function (res) {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\t\tif (res.data == 'update success')\r\n\t\t\t\t\t\t\t\ttoastr[\"success\"]('המאמר נערך בהצלחה!');\r\n\t\t\t\t\t\t\telse if (res.data == 'query failed')\r\n\t\t\t\t\t\t\t\ttoastr[\"error\"]('יצירת המאמר נכשלה , כשל במאגר הנתונים');\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\ttoastr[\"error\"]('עריכת המאמר נכשלה');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t$http({\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\turl: '../class/DB.php?act=create-art&' + query,\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tarticle: summerHTML,\r\n\t\t\t\t\t\t\t\tfrontImg: $scope.frontImg,\r\n\t\t\t\t\t\t\t\ttags: $scope.art.tagSelect\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}).then(function (res) {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\t\tif (res.data == 'upload success')\r\n\t\t\t\t\t\t\t\ttoastr[\"success\"]('המאמר נוצר בהצלחה!');\r\n\t\t\t\t\t\t\telse if (res.data == 'query failed')\r\n\t\t\t\t\t\t\t\ttoastr[\"error\"]('יצירת המאמר נכשלה , כשל במאגר הנתונים');\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\ttoastr[\"error\"]('יצירת המאמר נכשלה');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.tagSet = new Set();\r\n\t\t\t\t$scope.removeTag = function (val) {\r\n\t\t\t\t\t$scope.tagSet.delete(val);\r\n\t\t\t\t\t$scope.displayTags = Array.from($scope.tagSet);\r\n\t\t\t\t};\r\n\t\t\t\t$scope.displayTags = [];\r\n\t\t\t\t$('#summerNote').summernote({\r\n\t\t\t\t\tplaceHolder: 'כתוב את המאמר שלך',\r\n\t\t\t\t\ttabsize: 2,\r\n\t\t\t\t\theight: 300,\r\n\t\t\t\t\tonImageUpload: function (files, editor, $editable) {\r\n\t\t\t\t\t\tconsole.log('hi');\r\n\t\t\t\t\t\tvar data = new FormData();\r\n\t\t\t\t\t\tdata.append('summer_file', files);\r\n\t\t\t\t\t\tdata.append('user', 'haim307');\r\n\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\turl: \"../class/DB.php\",\r\n\t\t\t\t\t\t\tdataType: 'script',\r\n\t\t\t\t\t\t\tcache: false,\r\n\t\t\t\t\t\t\tcontentType: false,\r\n\t\t\t\t\t\t\tprocessData: false,\r\n\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\t\t\tsuccess: function (result) {\r\n\t\t\t\t\t\t\t\tconsole.log(result);\r\n\t\t\t\t\t\t\t\t$('#summernote').summernote(\"insertImage\", data, 'filename');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t/*$scope.uploadFile = function ($event) {\r\n\t\t\t\t\t\tconsole.log($('#formTitles').serialize());\r\n\t\t\t\t\t\tlet a = $('#formTitles').serialize();\r\n\t\t\t\t};*/\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/articles/create_or_edit_article.html'\r\n\t\t})\r\n\t\t.state('CMS.articles', {\r\n\t\t\turl: '/articles/{pageNum:int}/{query}',\r\n\t\t\tparams: {\r\n\t\t\t\tpageNum: {value: 0, squash: true},\r\n\t\t\t\tquery: {value: null, squash: true}\r\n\t\t\t},\r\n\t\t\tcontroller: function ($scope, CRUD, $http, $stateParams) {\r\n\t\t\t\tconsole.log($stateParams['pageNum']);\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.getArtList($stateParams['pageNum']);\r\n\t\t\t\t$scope.editFImg = false;\r\n\t\t\t\t$scope.saveImage = function ($event) {\r\n\t\t\t\t\talert('hi');\r\n\t\t\t\t\tconsole.log($event.target.file);\r\n\t\t\t\t\t$scope.newFront = $event.target.file;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.fullEdit = function (obj) {\r\n\t\t\t\t\t$scope.crud.editedArt = obj;\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/articles/articles.html'\r\n\t\t})\r\n\t\t.state('CMS.pages', {\r\n\t\t\turl: '/pages/',\r\n\t\t\tparams: {},\r\n\t\t\tcontroller: function ($scope, CRUD, $http, $stateParams) {\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.getCateIdLists = function () {\r\n\t\t\t\t\t$http.get('../class/DB.php?list=cates_id_lists').then((res) => {\r\n\t\t\t\t\t\t$scope.selectedArts = res.data;\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\t$scope.getCateIdLists();\r\n\t\t\t\t$scope.quickArtSearch = (e) => {\r\n\t\t\t\t\tlet val = e.target.value;\r\n\t\t\t\t\tconsole.log(val);\r\n\t\t\t\t\t$http.get(`../class/DB.php?act=quick-art-search&qt=${val}`).then((res) => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t$scope.quickResults = res.data;\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.quickResults = [];\r\n\t\t\t\t$scope.selectedArts = [];\r\n\t\t\t\t$scope.tab = 'search';\r\n\t\t\t\t$scope.addToList = (item,category) => {\r\n\t\t\t\t\tlet map = new Map($scope.selectedArts[category]);\r\n\t\t\t\t\tmap.set(item.id, item);\r\n\t\t\t\t\t$scope.selectedArts[category] = Array.from(map);\r\n\r\n\t\t\t\t};\r\n\t\t\t\t$scope.sendSelectedCates = (cate) => {\r\n\t\t\t\t\t//console.log($(\"#sortable\"+cate));\r\n\r\n\t\t\t\t\tlet idsInOrder = $('#sortable'+cate).sortable(\"toArray\");\r\n\t\t\t\t$http.get(`../class/DB.php?act=update-arts-id&order-ids=${idsInOrder}&category=${cate}`).then((res) => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t//$scope.quickResults = res.data;\r\n\t\t\t\t\tlet oldArr = new Map($scope.selectedArts[cate]),newArr = [];\r\n\t\t\t\t\tfor(let x=0; x<oldArr.size;x++){\r\n\t\t\t\t\t\tlet oldItem = oldArr.get(idsInOrder[x]);\r\n\t\t\t\t\t\tnewArr.push([oldItem.id,oldItem]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.selectedArts[cate] = newArr;\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(idsInOrder);\r\n\t\t\t\t};\r\n\t\t\t\t$scope.titlesCategories = ['politics','economy','tech'];\r\n\t\t\t\t//console.log($el);\r\n\t\t\t\tsetTimeout( ()=>{\r\n\t\t\t\t\tconst elList = $(\".sortable\");\r\n\t\t\t\t\tfor(let el of elList){\r\n\t\t\t\t\t\t$(el).sortable();\r\n\t\t\t\t\t\t$(el).disableSelection();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t},1000 );\r\n\t\t\t\t$scope.deleteCateArt = (id,cate,cateID) => {\r\n\t\t\t\t\t$http.delete(`../class/DB.php?act=delete-cate-art&art-id=${id}&category=${cateID}`).then((res) => {\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\tlet map = new Map($scope.selectedArts[cate]);\r\n\t\t\t\t\t\tmap.delete(id);\r\n\t\t\t\t\t\t//let oldArr = new Map($scope.selectedArts[cate]),newArr = [];\r\n/*\t\t\t\t\t\tfor(let x=0; x<oldArr.size;x++){\r\n\t\t\t\t\t\t\tlet oldItem = oldArr.get(idsInOrder[x]);\r\n\t\t\t\t\t\t\tnewArr.push([oldItem.id,oldItem]);\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t$scope.selectedArts[cate] = Array.from(map);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/pages/titles.html'\r\n\t\t})\r\n\t\t.state('CMS.allComments', {\r\n\t\t\turl: '/comments/{pageNum:int}/{query}',\r\n\t\t\tparams: {\r\n\t\t\t\tpageNum: {value: 1, squash: true},\r\n\t\t\t\tquery: {value: null, squash: true}\r\n\t\t\t},\r\n\t\t\tcontroller: function ($scope, CRUD, $stateParams) {\r\n\t\t\t\t$scope.pageNum = $stateParams['pageNum'];\r\n\t\t\t\t$scope.query = $stateParams['query'];\r\n\t\t\t\tconsole.log($stateParams['query']);\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.page = 'allComments';\r\n\t\t\t\t$scope.page = 'allComments';\r\n\t\t\t\t$scope.actID = null;\r\n\t\t\t\t$scope.crud.getTableQuan('comm').then(function (res) {\r\n\t\t\t\t\t$scope.crud.commQuan = res;\r\n\t\t\t\t\tconsole.log($scope.query);\r\n\t\t\t\t\tif ($scope.query) $scope.crud.goSearch($scope, $scope.query);\r\n\t\t\t\t\telse $scope.crud.getCommAndApply($scope, $scope.page + 'Comm');\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log($scope);\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/comments/comments.template.html',\r\n\t\t})\r\n\t\t.state('CMS.approved', {\r\n\t\t\turl: '/comments/approved/{pageNum:int}/{query}',\r\n\t\t\tparams: {\r\n\t\t\t\tpageNum: {value: 1, squash: true},\r\n\t\t\t\tquery: {value: null, squash: true}\r\n\t\t\t},\r\n\t\t\tcontroller: function ($scope, CRUD, $stateParams) {\r\n\t\t\t\t$scope.pageNum = $stateParams['pageNum'];\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.page = 'approved';\r\n\t\t\t\t$scope.page = 'approved';\r\n\t\t\t\t$scope.actID = 1;\r\n\t\t\t\t$scope.crud.getTableQuan('comm').then(function (res) {\r\n\t\t\t\t\t$scope.crud.commQuan = res;\r\n\t\t\t\t\t$scope.crud.getCommAndApply($scope, $scope.page + 'Comm');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/comments/comments.template.html',\r\n\t\t})\r\n\t\t.state('CMS.unapproved', {\r\n\t\t\turl: '/comments/unapproved/{pageNum:int}/{query}',\r\n\t\t\tparams: {\r\n\t\t\t\tpageNum: {value: 1, squash: true},\r\n\t\t\t\tquery: {value: null, squash: true}\r\n\t\t\t},\r\n\t\t\tcontroller: function ($scope, CRUD, $stateParams) {\r\n\t\t\t\t$scope.pageNum = $stateParams['pageNum'];\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.actID = -1;\r\n\t\t\t\t$scope.crud.page = 'unapproved';\r\n\t\t\t\t$scope.page = 'unapproved';\r\n\t\t\t\t$scope.crud.getTableQuan('comm').then(function (res) {\r\n\t\t\t\t\t$scope.crud.commQuan = res;\r\n\t\t\t\t\t$scope.crud.getCommAndApply($scope, $scope.page + 'Comm');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/comments/comments.template.html'\r\n\t\t})\r\n\t\t.state('CMS.pending', {\r\n\t\t\turl: '/comments/pending-comments/{pageNum:int}/{query}',\r\n\t\t\tparams: {\r\n\t\t\t\tpageNum: {value: 1, squash: true},\r\n\t\t\t\tquery: {value: null, squash: true}\r\n\t\t\t},\r\n\t\t\tcontroller: function ($scope, CRUD, $stateParams) {\r\n\t\t\t\t$scope.pageNum = $stateParams['pageNum'];\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.page = 'pending';\r\n\t\t\t\t$scope.page = 'pending';\r\n\t\t\t\t$scope.actID = 0;\r\n\t\t\t\t$scope.crud.getTableQuan('comm').then((res) => {\r\n\t\t\t\t\t$scope.crud.commQuan = res;\r\n\t\t\t\t\t$scope.crud.getCommAndApply($scope, $scope.page + 'Comm');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/comments/comments.template.html'\r\n\t\t})\r\n\t\t.state('CMS.allReporters', {\r\n\t\t\turl: '/reporters/{pageNum:int}/{query}',\r\n\t\t\tparams: {\r\n\t\t\t\tpageNum: {value: 0, squash: true},\r\n\t\t\t\tquery: {value: '', squash: true}\r\n\t\t\t},\r\n\t\t\tcontroller: function ($scope, CRUD, $stateParams) {\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.page = 'allReporters';\r\n\t\t\t\t$scope.page = 'allReporters';\r\n\t\t\t\t$scope.pageNum = $stateParams['pageNum'];\r\n\t\t\t\t$scope.query = $stateParams['query'];\r\n\t\t\t\t$scope.crud.getReporterList($scope.pageNum, $scope.query).then((data) => {\r\n\t\t\t\t\t$scope.commArr = data.commArr;\r\n\t\t\t\t\t$scope.loaded = true;\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t$scope.pagination = true;\r\n\t\t\t\t\t$scope.totalLen = data.totalLen;\r\n\t\t\t\t\t$scope.crud.commQuan = data.commQuan;\r\n\t\t\t\t\t$scope.crud.rangeUpdate($scope);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/reporters/all_reporters.html'\r\n\t\t})\r\n\t\t.state('CMS.reporter', {\r\n\t\t\turl: '/reporter/{repId:int}/{query}',\r\n\t\t\tparams: {\r\n\t\t\t\trepId: {value: null, squash: true},\r\n\t\t\t\tquery: {value: null, squash: true}\r\n\t\t\t},\r\n\t\t\tcontroller: function ($scope, CRUD, $stateParams) {\r\n\t\t\t\t$scope.pageNum = $stateParams['repId'];\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.page = 'reporter';\r\n\t\t\t\t$scope.page = 'reporter';\r\n\t\t\t\t$scope.log = (req) => console.log(req);\r\n\t\t\t},\r\n\t\t\ttemplateUrl: 'tpl/cms/reporters/add_or_edit_reporter.html'\r\n\t\t})\r\n\t\t.state('CMS.tags', {\r\n\t\t\turl: '/tags',\r\n\t\t\ttemplateUrl: 'tpl/cms/tags.html',\r\n\t\t\tcontroller: function ($scope, CRUD) {\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.getTagsList();\r\n\t\t\t}\r\n\t\t})\r\n\t\t.state('CMS.commenters', {\r\n\t\t\turl: '/commenters',\r\n\t\t\ttemplateUrl: 'tpl/cms/commenters.html',\r\n\t\t\tcontroller: function ($scope, CRUD) {\r\n\t\t\t\t$scope.crud = CRUD;\r\n\t\t\t\t$scope.crud.getCommentersList();\r\n\t\t\t},\r\n\t\t})\r\n\t\t.state('CMS.settings', {\r\n\t\t\turl: '/settings',\r\n\t\t\ttemplateUrl: 'tpl/cms/settings.html'\r\n\t\t})\r\n});\r\napp.filter('myDate', () => date => moment(date, \"YYYY-MM-DD\").fromNow());\r\napp.filter('longDate', () => (date) => moment(date).format('LLLL'));\r\napp.filter('status', () => (status) => status == 1 ? 'פעיל' : 'לא פעיל');\r\n"]}